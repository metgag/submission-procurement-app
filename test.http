@baseUrl = http://localhost:3080/api/v1
@adminToken = {{loginAdmin.response.body.data.token}}
@userToken = {{loginUser.response.body.data.token}}

# ============================================================
# PUBLIC ROUTES
# ============================================================

### =========================
### Health Check
### =========================
GET {{baseUrl}}/ping
Accept: text/plain


# ============================================================
# AUTH ROUTES
# ============================================================

### =========================
### Register User
### =========================
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "username": "user1",
  "password": "User!23"
}


### =========================
### Login Admin
### =========================
# @name loginAdmin
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "P@ssw0rd"
}


### =========================
### Login User
### =========================
# @name loginUser
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "username": "user1",
  "password": "User!23"
}


# ============================================================
# SHARED PROTECTED ROUTES (ADMIN & USER)
# ============================================================

### =========================
### Read Items
### =========================
GET {{baseUrl}}/items
Authorization: Bearer {{userToken}}


### =========================
### Read Suppliers
### =========================
GET {{baseUrl}}/suppliers
Authorization: Bearer {{userToken}}


### =========================
### Read Supplier Items
### =========================
GET {{baseUrl}}/supplier-items
Authorization: Bearer {{userToken}}


### =========================
### Read Supplier Items By Supplier ID
### =========================
GET {{baseUrl}}/supplier-items?supplier_id=1
Authorization: Bearer {{userToken}}


# ============================================================
# ADMIN ROUTES
# ============================================================

### =========================
### Create Supplier
### =========================
POST {{baseUrl}}/admin/suppliers
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "name": "Tarung Derajat",
  "email": "ajat@tarung.com",
  "address": "Jl. Tarung No. 42"
}


### =========================
### Update Supplier (PATCH)
### =========================
PATCH {{baseUrl}}/admin/suppliers/1
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "address": "Jl. Baru No. 99"
}


### =========================
### Delete Supplier
### =========================
DELETE {{baseUrl}}/admin/suppliers/2
Authorization: Bearer {{adminToken}}


### =========================
### Create Item
### =========================
POST {{baseUrl}}/admin/items
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "name": "Jam Tangan"
}


### =========================
### Update Item (PATCH)
### =========================
PATCH {{baseUrl}}/admin/items/1
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "name": "Kacamata Premium"
}


### =========================
### Delete Item
### =========================
DELETE {{baseUrl}}/admin/items/3
Authorization: Bearer {{adminToken}}


### =========================
### Assign Item to Supplier
### =========================
POST {{baseUrl}}/admin/supplier-items
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "supplier_id": 4,
  "item_id": 2,
  "price": 90000,
  "stock": 20
}


### =========================
### Update Supplier Item (PATCH)
### =========================
PATCH {{baseUrl}}/admin/supplier-items/1
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "price": 95000,
  "stock": 15
}


### =========================
### Delete Supplier Item
### =========================
DELETE {{baseUrl}}/admin/supplier-items/1
Authorization: Bearer {{adminToken}}


# ============================================================
# USER ROUTES
# ============================================================

### =========================
### Create Purchase
### =========================
POST {{baseUrl}}/purchases
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "supplier_id": 1,
  "items": [
    {
      "supplier_item_id": 1,
      "quantity": 2
    },
    {
      "supplier_item_id": 2,
      "quantity": 1
    }
  ]
}
